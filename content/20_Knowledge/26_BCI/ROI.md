---
publish: true
---


**ROI (Region of Interestï¼Œæ„Ÿå…´è¶£åŒºåŸŸ)** æ˜¯è„‘ç§‘å­¦ç ”ç©¶ï¼ˆç‰¹åˆ«æ˜¯ fMRI åˆ†æï¼‰ä¸­æœ€é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ã€‚

å¯¹äºä½ è¿™æ ·ä¸€ä¸ªä» EEGï¼ˆè„‘ç”µï¼‰è½¬åˆ° fMRIï¼ˆæ ¸ç£ï¼‰çš„ç ”ç©¶ç”Ÿæ¥è¯´ï¼Œç†è§£ ROI æœ€å¿«çš„æ–¹å¼æ˜¯åšä¸€ä¸ª**ç±»æ¯”**ï¼š

> **EEG çš„â€œé€šé“é€‰æ‹©â€ = fMRI çš„ â€œROI é€‰æ‹©â€**

*   **åœ¨ EEG ä¸­**ï¼šä½ åšè¿åŠ¨æƒ³è±¡ä»»åŠ¡æ—¶ï¼Œä½ çŸ¥é“åªæœ‰å¤´é¡¶çš„ **C3ã€Czã€C4** ç”µæè·Ÿè¿åŠ¨çš®å±‚æœ‰å…³ï¼Œä½ ä¸ä¼šå»åˆ†æé¢å¤´ï¼ˆFp1ï¼‰æˆ–è€³åï¼ˆA1ï¼‰çš„ç”µæï¼Œå› ä¸ºé‚£é‡Œå…¨æ˜¯çœ¼ç”µå’Œå™ªéŸ³ã€‚
*   **åœ¨ fMRI ä¸­**ï¼šå…¨è„‘æœ‰ ~100,000 ä¸ªä½“ç´ ï¼ˆVoxelsï¼‰ã€‚ä½†åªæœ‰åè„‘å‹ºçš„**æ•å¶ï¼ˆOccipital Lobeï¼‰**åœ¨å¤„ç†è§†è§‰ã€‚å¦‚æœä½ æŠŠå…¨è„‘æ•°æ®æ‰”è¿›æ¨¡å‹ï¼Œå™ªéŸ³ä¼šæ·¹æ²¡ä¿¡å·ã€‚**ROI å°±æ˜¯ä½ åœ¨ 3D å¤§è„‘ä¸­â€œåœˆâ€å‡ºæ¥çš„é‚£ä¸ªæœ‰æ•ˆåŒºåŸŸã€‚**

---

### 1. ä¸ºä»€ä¹ˆè¦ç”¨ ROIï¼Ÿï¼ˆä¸‰å¤§ç†ç”±ï¼‰

1.  **é™ç»´ä¸å»å™ª (Dimensionality Reduction):**
    *   å…¨è„‘æ•°æ®ç»´åº¦ï¼š`(81, 104, 83)` â‰ˆ 70 ä¸‡ä¸ªä½“ç´ ï¼ˆåŒ…å«è„‘å¤–ç©ºæ°”ï¼‰ã€‚
    *   æœ‰æ•ˆè§†è§‰åŒºç»´åº¦ï¼šå¯èƒ½åªæœ‰ **5,000 ~ 10,000** ä¸ªä½“ç´ ã€‚
    *   åªé€‰ ROIï¼Œå¯ä»¥å°†è¾“å…¥ç‰¹å¾å‡å°‘ 90% ä»¥ä¸Šï¼Œä¸”å»é™¤æ— å…³è„‘åŒºçš„å™ªå£°ã€‚

2.  **ç”Ÿç‰©å­¦è§£é‡Šæ€§ (Interpretability):**
    *   å¦‚æœä½ çš„æ¨¡å‹ç”¨ **V1ï¼ˆåˆçº§è§†è§‰çš®å±‚ï¼‰** çš„æ•°æ®èƒ½å®Œç¾é‡å»ºå›¾ç‰‡ï¼Œè¯´æ˜å›¾ç‰‡çš„åŸºæœ¬çº¿æ¡ä¿¡æ¯è¢«å¤§è„‘ç¼–ç äº†ã€‚
    *   å¦‚æœä½ çš„æ¨¡å‹ç”¨ **FFAï¼ˆé¢å­”åŒºï¼‰** çš„æ•°æ®èƒ½åˆ†ç±»äººè„¸ï¼Œè¯´æ˜å¤§è„‘æå–äº†è¯­ä¹‰ä¿¡æ¯ã€‚

3.  **è§£å†³å¤šé‡æ¯”è¾ƒé—®é¢˜ (Statistical Power):**
    *   åšç»Ÿè®¡æ£€éªŒæ—¶ï¼Œä½“ç´ è¶Šå¤šï¼ŒçŸ«æ­£è¶Šä¸¥ï¼ˆBonferroni correctionï¼‰ã€‚é™åˆ¶åœ¨ ROI å†…å¯ä»¥æé«˜ç»Ÿè®¡æ•ˆåŠ›ã€‚

---

### 2. NSD æ•°æ®é›†é‡Œçš„ ROI è¯¦è§£

NSD æä¾›äº†éå¸¸è¯¦å°½çš„ã€**é’ˆå¯¹æ¯ä¸ªè¢«è¯•å•ç‹¬ç»˜åˆ¶**çš„ ROIã€‚ä½ éœ€è¦é‡ç‚¹å…³æ³¨ä»¥ä¸‹ä¸¤ç±»ï¼š

#### A. è§†ç½‘è†œæ‹“æ‰‘æ˜ å°„åŒº (Retinotopic ROIs) â€”â€” `prf-visualrois`
è¿™äº›æ˜¯è§†è§‰å¤„ç†çš„â€œæµæ°´çº¿â€å‰ç«¯ã€‚

*   **V1 (Primary Visual Cortex):**
    *   **åŠŸèƒ½ï¼š** å¤„ç†æœ€åŸºç¡€çš„ä¿¡æ¯ï¼ˆè¾¹ç¼˜ã€æ–¹å‘ã€å¯¹æ¯”åº¦ã€ç©ºé—´é¢‘ç‡ï¼‰ã€‚
    *   **è§£ç ç”¨é€”ï¼š** **å›¾åƒé‡å»º (Image Reconstruction)** çš„ä¸»åŠ›å†›ã€‚æƒ³ç”»å‡ºâ€œçŒ«çš„è½®å»“â€ï¼Œå¿…é¡»ç”¨ V1ã€‚
*   **V2, V3:**
    *   **åŠŸèƒ½ï¼š** å¤„ç†ç¨å¤æ‚çš„çº¹ç†å’Œå½¢çŠ¶ç»„åˆã€‚
*   **hV4 (Human V4):**
    *   **åŠŸèƒ½ï¼š** å¤„ç†é¢œè‰²å’Œä¸­ç­‰å¤æ‚åº¦çš„å½¢çŠ¶ã€‚

> **ç‰¹ç‚¹ï¼š** è¿™äº›åŒºåŸŸæ˜¯æŒ‰â€œè§†é‡â€æ’åˆ—çš„ã€‚è§†é‡ä¸­å¿ƒå¯¹åº”çš„ä½“ç´ å’Œè§†é‡è¾¹ç¼˜å¯¹åº”çš„ä½“ç´ æ˜¯ç‰©ç†ä¸Šåˆ†å¼€çš„ã€‚

#### B. åŠŸèƒ½å®šä½åŒº (Functional Localizers) â€”â€” `floc-*`
è¿™äº›æ˜¯è§†è§‰å¤„ç†çš„â€œæµæ°´çº¿â€é«˜ç«¯ï¼Œè´Ÿè´£**è¯­ä¹‰è¯†åˆ«**ã€‚

*   **FFA (Fusiform Face Area):**
    *   **åŠŸèƒ½ï¼š** ä¸“é—¨çœ‹ **â€œè„¸â€**ã€‚ä¸ç®¡æ˜¯è°çš„è„¸ï¼Œè¿™é‡Œéƒ½ä¼šäº®ã€‚
*   **PPA (Parahippocampal Place Area):**
    *   **åŠŸèƒ½ï¼š** ä¸“é—¨çœ‹ **â€œæˆ¿å­/é£æ™¯/åœºæ™¯â€**ã€‚
*   **VWFA (Visual Word Form Area):**
    *   **åŠŸèƒ½ï¼š** ä¸“é—¨çœ‹ **â€œæ–‡å­—/å•è¯â€**ã€‚
*   **EBA (Extrastriate Body Area):**
    *   **åŠŸèƒ½ï¼š** ä¸“é—¨çœ‹ **â€œèº«ä½“éƒ¨ä½â€** (èƒ³è†Šã€è…¿)ã€‚

> **è§£ç ç”¨é€”ï¼š** **å›¾åƒåˆ†ç±» (Classification)**ã€‚å¦‚æœ FFA äº®äº† PPA æ²¡äº®ï¼Œä½ çš„æ¨¡å‹å¯ä»¥æœ‰ 99% çš„æŠŠæ¡çŒœâ€œè¢«è¯•çœ‹åˆ°çš„æ˜¯äººï¼Œä¸æ˜¯æˆ¿å­â€ã€‚

---

### 3. æŠ€æœ¯å®ç°ï¼šä»€ä¹ˆæ˜¯ Maskï¼ˆæ©è†œï¼‰ï¼Ÿ

åœ¨ä»£ç å±‚é¢ï¼ŒROI å°±æ˜¯ä¸€ä¸ª **Maskï¼ˆæ©è†œï¼‰**ã€‚

*   **fMRI æ•°æ® ($X$)**: ä¸€ä¸ª 3D çŸ©é˜µï¼Œæ¯”å¦‚ `(80, 80, 80)`ã€‚æ¯ä¸ªç‚¹æ˜¯ Beta å€¼ã€‚
*   **ROI Mask ($M$)**: ä¸€ä¸ªåŒæ ·å¤§å°çš„ `(80, 80, 80)` çŸ©é˜µã€‚
    *   å±äºè¯¥ ROI çš„ä½ç½®å¡« **1** (æˆ– Label ID)ã€‚
    *   ä¸å±äºçš„ä½ç½®å¡« **0**ã€‚

**æ“ä½œé€»è¾‘ï¼š** å°†æ•°æ®ä¸ Mask ç›¸ä¹˜ï¼Œæˆ–è€…åˆ©ç”¨ Boolean Indexing æå–æ•°æ®ã€‚

#### ğŸ Python ä»£ç æ¼”ç¤º (ä¸€å®šè¦çœ‹æ‡‚è¿™ä¸ª)

å‡è®¾ä½ å·²ç»ä¸‹è½½äº† `betas_session01.hdf5` å’Œ `prf-visualrois.nii.gz`ã€‚

```python
import nibabel as nib
import h5py
import numpy as np

# 1. åŠ è½½ ROI æ–‡ä»¶ (Mask)
# è¿™ä¸ªæ–‡ä»¶é‡Œå­˜çš„æ˜¯æ•´æ•°æ ‡ç­¾ï¼š0=èƒŒæ™¯, 1=V1v, 2=V1d, 3=V2v...
roi_img = nib.load('nsddata/ppdata/subj01/func1pt8mm/roi/prf-visualrois.nii.gz')
roi_vol = roi_img.get_fdata()  # Shape: (81, 104, 83)

# 2. å®šä¹‰ä½ æƒ³æå–çš„åŒºåŸŸ
# å‡è®¾æŸ¥è¡¨å¾—çŸ¥ï¼šV1 å¯¹åº”çš„æ ‡ç­¾æ˜¯ 1 å’Œ 2 (åˆ†åˆ«æ˜¯è…¹ä¾§å’ŒèƒŒä¾§V1)
target_label_ids = [1, 2]

# 3. åˆ›å»º Boolean Mask (æ ¸å¿ƒæ­¥éª¤)
# æ‰¾å‡ºæ‰€æœ‰ç­‰äº 1 æˆ– 2 çš„ä½ç½®
# isin å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå…¨æ˜¯ True/False çš„ 3D çŸ©é˜µ
v1_mask = np.isin(roi_vol, target_label_ids) 
print(f"V1 Mask Shape: {v1_mask.shape}") # (81, 104, 83)
print(f"V1 åŒ…å«çš„ä½“ç´ æ•°é‡: {np.sum(v1_mask)}") # æ¯”å¦‚è¾“å‡º 1200 ä¸ªç‚¹

# 4. åŠ è½½å¤§è„‘æ•°æ® (Betas)
with h5py.File('betas_session01.hdf5', 'r') as f:
    # å‡è®¾æ•°æ®æ˜¯ (X, Y, Z, Trials) -> (81, 104, 83, 750)
    # æ³¨æ„ï¼šä¸ºäº†æ¼”ç¤ºï¼Œè¿™é‡Œå‡è®¾æŠŠæ‰€æœ‰æ•°æ®è¯»è¿›æ¥äº†ã€‚
    # å®é™…ä¸­åº”è¯¥åªè¯» Mask å¯¹åº”çš„éƒ¨åˆ†ï¼Œæˆ–è€…åˆ†æ‰¹è¯»ã€‚
    full_brain_data = f['betas'][:] 
    
    # è®°å¾—é™¤ä»¥ 300 !!!
    full_brain_data = full_brain_data.astype(float) / 300.0

# 5. åº”ç”¨ Mask (æå–ç‰¹å¾)
# åˆ©ç”¨ numpy çš„å¸ƒå°”ç´¢å¼•ï¼Œè¿™ä¸€æ­¥ä¼šæŠŠ 3D è„‘å˜å½¢æˆ 1D å‘é‡
# ç»“æœç»´åº¦å˜æˆ: (ä½“ç´ æ•°é‡, Trials) -> (1200, 750)
v1_features = full_brain_data[v1_mask, :]

# è½¬ç½®ä¸€ä¸‹ï¼Œå˜æˆ (Samples, Features) å–‚ç»™ SVM æˆ– ç¥ç»ç½‘ç»œ
X_train = v1_features.T  # Shape: (750, 1200)

print("ç°åœ¨ä½ å¯ä»¥æŠŠ X_train å–‚ç»™ sklearn äº†")
```

---

### 4. ç ”ä¸€æ–°ç”Ÿå¸¸çŠ¯çš„ ROI é”™è¯¯

1.  **ç”¨é”™ç©ºé—´ (Space Mismatch):**
    *   ä½ çš„ Betas æ˜¯ `func1pt8mm` (1.8mmåˆ†è¾¨ç‡)ï¼Œä½†ä½ çš„ ROI æ–‡ä»¶ä¸‹è½½äº† `func1mm` (1mmåˆ†è¾¨ç‡) æˆ–è€… `fsaverage`ã€‚
    *   **åæœï¼š** çŸ©é˜µå½¢çŠ¶å¯¹ä¸ä¸Šï¼Œä»£ç ç›´æ¥æŠ¥é”™ï¼›æˆ–è€…å½¢çŠ¶ç¢°å·§ä¸€æ ·ä½†ä½ç½®å…¨é”™ï¼Œæå–å‡ºæ¥çš„å…¨æ˜¯å™ªå£°ã€‚

2.  **å¿½è§†äº† `nsdgeneral`:**
    *   æ–°æ‰‹å¾€å¾€çº ç»“â€œæˆ‘æ˜¯é€‰ V1 è¿˜æ˜¯ V2 è¿˜æ˜¯ V3ï¼Ÿâ€
    *   **å»ºè®®ï¼š** ä¸€å¼€å§‹ç›´æ¥ç”¨ **`nsdgeneral`** è¿™ä¸ª ROIã€‚å®ƒåŒ…å«äº† V1-V4 ä»¥åŠæ›´é«˜çº§çš„åŒºåŸŸï¼Œæ˜¯ä¸€ä¸ªæ‰‹åŠ¨ç”»å¥½çš„â€œè§†è§‰å¤§ç¤¼åŒ…â€ï¼Œæœ€é€‚åˆè·‘ Baseline æ¨¡å‹ã€‚

3.  **ä»¥ä¸º ROI æ˜¯å®Œç¾çš„:**
    *   æ‰‹åŠ¨ç»˜åˆ¶çš„ ROI ä¹Ÿæœ‰è¯¯å·®ã€‚æœ‰äº›ä½“ç´ å¯èƒ½å¤„äº V1 å’Œ V2 çš„äº¤ç•Œå¤„ã€‚
    *   æœ‰äº› ROI å¾ˆå¤§ï¼ˆå¦‚ PPAï¼‰ï¼Œé‡Œé¢å¯èƒ½åŒ…å«å¾ˆå¤šå¯¹å½“å‰ä»»åŠ¡ä¸æ•æ„Ÿçš„ä½“ç´ ã€‚åœ¨ä½¿ç”¨å‰ï¼Œç»“åˆ `ncsnr` (å™ªå£°å¤©èŠ±æ¿) å†æ¬¡ç­›é€‰é«˜ä¿¡å™ªæ¯”ä½“ç´ æ˜¯ä¸€ä¸ªé«˜çº§æŠ€å·§ï¼ˆFeature Selectionï¼‰ã€‚

### æ€»ç»“
*   **ROI å°±æ˜¯è¿‡æ»¤å™¨ã€‚**
*   åš **é‡å»º (Reconstruction)** -> é‡ç‚¹çœ‹ **V1, V2, V3**ã€‚
*   åš **è¯­ä¹‰åˆ†ç±» (Semantic Classification)** -> é‡ç‚¹çœ‹ **FFA, PPA, LO**ã€‚
*   **åˆšä¸Šæ‰‹** -> ç›´æ¥ç”¨ **`nsdgeneral`**ã€‚